{"version":3,"sources":["canvasPrices.js"],"names":["pricesSection","document","querySelector","arrayOfCards","querySelectorAll","firstPriceCard","params","width","lastWidth","height","triangleHeight","rectHeight","colorStart","colorEnd","colorDefault","getWidth","priceBlock","clientWidth","setCanvasSize","canvas","setAttribute","createGradient","ctx","gradient","createLinearGradient","addColorStop","drawPentagon","fillStyle","clearRect","beginPath","moveTo","lineTo","fill","createPriceCanvasElement","singleCard","wrapper","getContext","addEventListener","forEach","window"],"mappings":"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","file":"canvasPrices.js","sourcesContent":["import debounce from './tools';\n\nconst pricesSection = document.querySelector('.prices');\nconst arrayOfCards = pricesSection.querySelectorAll('.price-card');\nconst firstPriceCard = arrayOfCards[0];\n\nconst params = {\n  width: null,\n  lastWidth: null,\n  height: 120,\n  triangleHeight: 40,\n  rectHeight: () => params.height - params.triangleHeight,\n  colorStart: '#fd712c',\n  colorEnd: '#f21780',\n  colorDefault: 'white',\n};\n\nconst getWidth = () => {\n  const priceBlock = firstPriceCard.querySelector('.price-card__price');\n  params.width = priceBlock.clientWidth;\n};\n\nconst setCanvasSize = (canvas) => {\n  canvas.setAttribute('width', `${params.width}px`);\n  canvas.setAttribute('height', `${params.height}px`);\n};\n\nconst createGradient = (ctx) => {\n  const gradient = ctx.createLinearGradient(0, 0, params.width, 0);\n  gradient.addColorStop(0, params.colorStart);\n  gradient.addColorStop(1, params.colorEnd);\n  return gradient;\n};\n\nconst drawPentagon = (canvas, ctx, fillStyle) => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = fillStyle;\n  ctx.beginPath();\n  ctx.moveTo(0, 0);\n  ctx.lineTo(params.width, 0);\n  ctx.lineTo(params.width, params.rectHeight());\n  ctx.lineTo(params.width / 2, params.height);\n  ctx.lineTo(0, params.rectHeight());\n  ctx.fill();\n};\n\nconst createPriceCanvasElement = (singleCard) => {\n  const wrapper = singleCard.querySelector('.price-card__wrapper');\n  const canvas = singleCard.querySelector('.price-canvas__canvas');\n  const ctx = canvas.getContext('2d');\n  const gradient = createGradient(ctx);\n\n  setCanvasSize(canvas);\n  drawPentagon(canvas, ctx, params.colorDefault);\n\n  wrapper.addEventListener('mouseover', () => {\n    drawPentagon(canvas, ctx, gradient);\n  });\n\n  wrapper.addEventListener('mouseleave', () => {\n    drawPentagon(canvas, ctx, params.colorDefault);\n  });\n};\n\n\n// Выполнение скрипта\ngetWidth();\narrayOfCards.forEach(createPriceCanvasElement);\nparams.lastWidth = params.width;\n\nwindow.addEventListener('resize', () => {\n  debounce();\n  getWidth();\n  if (params.lastWidth === params.width) {\n    return;\n  }\n  arrayOfCards.forEach(createPriceCanvasElement);\n  params.lastWidth = params.width;\n});\n"]}